---
title: 'CI, рейлы и линт: normalize'
slug: 005-ci-rejly-i-lint-normalize
summary: Внедрение автоматической нормализации контента через CI и скрипт normalize.
tags:
  - Story
machine_tags:
  - content/story
status: ready
last_edited_time: null
---

# CI, рейлы и линт: normalize

TL;DR

- Создан скрипт normalize.mjs для автоматической нормализации экспортированного контента.
- Скрипт переносит хэштеги в front matter, генерирует slug, дополняет machine_tags.
- CI workflow автоматически запускает normalize при изменении файлов в docs/.
- Нормализация обеспечивает единообразие файлов и стабильность путей.
- Дальше — обогащение тегов через tags.yaml и фасетную таксономию.

**Что произошло.** После первых импортов выяснилось, что экспортированный контент требует нормализации: хэштеги в тексте нужно переносить в front matter, генерировать slug из заголовков, дополнять machine_tags по алиасам. Создан скрипт `scripts/normalize.mjs` для автоматической обработки.

**Зачем это делали.** Нужно было обеспечить единообразие файлов и стабильность путей. Нормализация автоматизирует рутинные задачи: перенос тегов, генерация slug, переименование файлов. Это позволяет поддерживать консистентность структуры без ручных правок.

**Что получилось.** Скрипт normalize обрабатывает все Markdown-файлы в docs/, переносит хэштеги в tags[], дополняет machine_tags по aliases из context-map.yaml, проставляет title/slug/summary, переименовывает файлы по slug в kebab-case. CI workflow автоматически запускает normalize при изменении файлов.

**Тех-вставка.** Скрипт описан в `docs/spec-normalize-i-politika-imyon.md`. Нормализация использует распаковку через bsdtar с поддержкой двойного ZIP. Стабильность путей обеспечивается правилом: не меняем slug без явной миграции. Проверки включают отсутствие дубликатов slug и корректность Unicode в названиях.

**Что дальше.** После нормализации следующий шаг — обогащение тегов через tags.yaml и фасетную таксономию. Это позволит автоматически генерировать machine_tags и обеспечивать консистентность навигации.

