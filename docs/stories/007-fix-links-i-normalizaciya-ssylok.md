---
title: Fix links и нормализация ссылок
slug: 007-fix-links-i-normalizaciya-ssylok
summary: Автоматизация исправления ссылок из Notion в нормализованные по slug.
tags:
  - Story
machine_tags:
  - content/story
status: ready
last_edited_time: null
---

# Fix links и нормализация ссылок

TL;DR

- Создан скрипт fix-links.mjs для автоматического исправления ссылок из Notion.
- Скрипт заменяет percent-encoded ссылки и Notion-хвосты на нормализованные по slug.
- Исправление ссылок интегрировано в workflow импорта и CI.
- Нормализация обеспечивает работоспособность ссылок после экспорта.
- Дальше — создание link-map для сопоставления проблемных ссылок.

**Что произошло.** После импорта из Notion ссылки приходили в формате percent-encoded или с Notion-хвостами, что делало их неработоспособными в репозитории. Создан скрипт `scripts/fix-links.mjs` для автоматического исправления ссылок на нормализованные по slug.

**Зачем это делали.** Нужно было обеспечить работоспособность ссылок после экспорта без ручных правок. Скрипт автоматически находит ссылки в Markdown, сопоставляет их с реальными файлами по slug и заменяет на корректные относительные пути. Это позволяет поддерживать связи между документами автоматически.

**Что получилось.** Скрипт fix-links обрабатывает все Markdown-файлы, находит ссылки в формате `[текст](ссылка)`, сопоставляет их с файлами через slug, заменяет на нормализованные пути. Исправление интегрировано в workflow импорта и CI, запускается автоматически после normalize.

**Тех-вставка.** Скрипт использует `gray-matter` для парсинга front matter и извлечения slug. Сопоставление ссылок происходит через построение карты title → slug из всех файлов. Процесс описан в README: экспорт → normalize → fix:links → проверка через lint:docs.

**Что дальше.** После базового исправления ссылок следующий шаг — создание link-map для сопоставления проблемных ссылок. Это позволит обрабатывать случаи, когда ссылки не могут быть автоматически сопоставлены по slug.

