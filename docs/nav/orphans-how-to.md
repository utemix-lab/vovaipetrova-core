---
title: Как работать с orphan страницами
slug: orphans-how-to
summary: Инструкция по работе со страницами без маршрутов в routes.yml (orphan pages)
tags:
  - Навигация
  - Документация
machine_tags:
  - action/build
  - product/kb
  - product/site
  - theme/ux
status: ready
---

# Как работать с orphan страницами

## TL;DR

Orphan страницы — это страницы в `docs/`, которые не упомянуты в `routes.yml` и не имеют `service: true`. Они не отображаются в навигации сайта, но доступны через Explorer → Orphans view. Используйте `npm run routes:check` для проверки и `routes.yml` для добавления страниц в навигацию.

## Что такое orphan страницы?

Orphan страницы (страницы-сироты) — это Markdown файлы в `docs/`, которые:
- Не упомянуты в `docs/nav/routes.yml`
- Не имеют `service: true` в front matter
- Не отображаются в основной навигации сайта

Эти страницы доступны через Explorer на вкладке "Orphans", но не включены в структуру сайта.

## Зачем нужны orphan страницы?

Orphan страницы помогают:
- **Отслеживать незавершённый контент** — страницы, которые ещё не готовы для публикации
- **Находить забытые страницы** — контент, который был создан, но не добавлен в навигацию
- **Контролировать консистентность** — убедиться, что все публичные страницы имеют маршруты

## Как проверить orphan страницы?

### Автоматическая проверка

```bash
npm run routes:check
```

Скрипт:
1. Читает все страницы из `docs/`
2. Сравнивает их с маршрутами в `routes.yml`
3. Генерирует `prototype/data/orphans.json`
4. Выводит список orphan страниц в консоль

### Просмотр в Explorer

1. Откройте Explorer: https://utemix-lab.github.io/vovaipetrova-core/
2. Перейдите на вкладку **"Orphans"**
3. Просмотрите список страниц без маршрутов

## Что делать с orphan страницами?

### Вариант 1: Добавить страницу в routes.yml

Если страница должна быть в навигации:

1. Откройте `docs/nav/routes.yml`
2. Найдите подходящий раздел или создайте новый
3. Добавьте запись:

```yaml
entries:
  - slug: page-slug
    doc: docs/path/to/page.md
    status: ok
    notes: Описание страницы
```

4. Обновите `routes.json`:
   ```bash
   npm run routes:check
   ```

5. Проверьте, что страница исчезла из Orphans view

**Подробнее:** см. [routes-yml-how-to.md](./routes-yml-how-to.md)

### Вариант 2: Пометить как служебную

Если страница не должна быть в публичной навигации (черновик, внутренняя документация):

1. Откройте файл страницы
2. Добавьте в front matter:

```yaml
---
service: true
---
```

3. Проверьте, что страница исчезла из Orphans view

**Важно:** Страницы с `service: true` не отображаются в Explorer и не попадают в Orphans view.

### Вариант 3: Оставить как orphan

Если страница ещё не готова для публикации:
- Оставьте её как orphan
- Она будет доступна через Explorer → Orphans view
- Добавьте в навигацию, когда будет готова

## Примеры

### Пример 1: Добавление новой страницы в навигацию

**Проблема:** Страница `docs/new-feature.md` отображается в Orphans view.

**Решение:**

1. Добавьте в `routes.yml`:
```yaml
routes:
  - path: /features
    title: Функции
    entries:
      - slug: new-feature
        doc: docs/new-feature.md
        status: ok
        notes: Описание новой функции
```

2. Обновите routes.json:
```bash
npm run routes:check
```

3. Проверьте Explorer → Orphans view (страница должна исчезнуть)

### Пример 2: Помечание черновика как служебного

**Проблема:** Черновик `docs/draft-article.md` отображается в Orphans view.

**Решение:**

1. Откройте `docs/draft-article.md`
2. Добавьте в front matter:
```yaml
---
title: Черновик статьи
slug: draft-article
service: true  # ← Добавьте это
---
```

3. Проверьте Explorer → Orphans view (страница должна исчезнуть)

### Пример 3: Временное хранение orphan страницы

**Ситуация:** Страница `docs/experimental-feature.md` ещё в разработке.

**Решение:**

- Оставьте страницу как orphan
- Она будет доступна через Explorer → Orphans view
- Когда будет готова, добавьте в `routes.yml`

## CI/CD проверка

При создании PR с изменениями в `docs/`:
- CI автоматически проверяет orphan страницы
- Если найдены новые orphans, они отображаются в комментариях PR
- Это не блокирует мердж, но помогает отслеживать консистентность

## Частые вопросы

**Q: Всегда ли нужно добавлять страницы в routes.yml?**  
A: Нет. Если страница служебная (черновик, внутренняя документация), пометьте её `service: true`. Если страница публичная, добавьте в `routes.yml`.

**Q: Можно ли иметь orphan страницы в репозитории?**  
A: Да, но рекомендуется либо добавлять их в навигацию, либо помечать как служебные. Orphan страницы могут указывать на незавершённый контент.

**Q: Как найти все orphan страницы?**  
A: Используйте `npm run routes:check` или откройте Explorer → Orphans view.

**Q: Что делать, если orphan страница должна быть в навигации, но я не знаю, в какой раздел её добавить?**  
A: Создайте новый раздел в `routes.yml` или добавьте в существующий раздел "Прочее". Подробнее см. [routes-yml-how-to.md](./routes-yml-how-to.md).

**Q: Могут ли orphan страницы иметь ссылки на другие страницы?**  
A: Да, но они не будут отображаться в основной навигации. Рекомендуется добавлять публичные страницы в `routes.yml`.

## Связанные файлы

- `docs/nav/routes.yml` — карта маршрутов сайта
- `prototype/data/orphans.json` — список orphan страниц (генерируется автоматически)
- `scripts/check-routes-consistency.mjs` — скрипт проверки консистентности
- `docs/nav/routes-yml-how-to.md` — инструкция по работе с routes.yml

## Связанные команды

```bash
# Проверка orphan страниц
npm run routes:check

# Просмотр списка orphans в консоли
node scripts/check-routes-consistency.mjs

# Обновление routes.json (включает проверку orphans)
node scripts/generate-routes-json.mjs
```

