<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vova &amp; Petrova — Документы</title>
    <link rel="stylesheet" href="styles.css" />
    <script defer src="app.js"></script>
  </head>
  <body data-view="index">
    <header class="site-header">
      <div class="site-header__top">
        <h1 class="site-title">Vova &amp; Petrova — Docs Explorer</h1>
        <span class="site-meta">Статичный предпросмотр GitHub Pages</span>
      </div>
      <div class="controls">
        <div class="filters" role="group" aria-label="Фильтр по статусу">
          <button type="button" class="filter-button is-active" data-status="all">
            Все
          </button>
          <button type="button" class="filter-button" data-status="ready">
            Ready
          </button>
          <button type="button" class="filter-button" data-status="review">
            Review
          </button>
          <button type="button" class="filter-button" data-status="draft">
            Draft
          </button>
        </div>
        <div class="sorts" role="group" aria-label="Сортировка">
          <button type="button" class="sort-button is-active" data-sort="route">
            By route
          </button>
          <button type="button" class="sort-button" data-sort="status">
            By status
          </button>
        </div>
        <label class="search">
          <span class="search__label">Поиск</span>
          <input
            id="search-input"
            class="search__input"
            type="search"
            placeholder="Поиск по названию…"
            autocomplete="off"
          />
        </label>
      </div>
      <div class="view-toggle" role="group" aria-label="Разделы Explorer">
        <button type="button" class="view-button is-active" data-panel="docs">
          Docs
        </button>
        <button type="button" class="view-button" data-panel="stories">
          Stories
        </button>
        <button type="button" class="view-button" data-panel="issues">
          Issues
        </button>
        <button type="button" class="view-button" data-panel="orphans">
          Orphans
        </button>
        <button type="button" class="view-button" data-panel="kb-index">
          KB Index
        </button>
        <button type="button" class="view-button" data-panel="stories-index">
          Stories Index
        </button>
        <button type="button" class="view-button" data-panel="unresolved-terms">
          Unresolved Terms
        </button>
        <button type="button" class="view-button" data-panel="diagnostics">
          Diagnostics
        </button>
      </div>
    </header>
    <main class="content">
      <div id="stories-banner" class="stories-banner hidden">
        <div class="stories-banner__content">
          <span class="stories-banner__text">
            Stories paused — ждём RFC v2
            <a href="https://github.com/utemix-lab/vovaipetrova-core#stories" class="stories-banner__link">(через RFC‑процесс)</a>
          </span>
        </div>
      </div>
      <section id="docs-panel">
        <div id="mini-dashboard" class="mini-dashboard hidden"></div>
        <div id="tag-filter-info" class="tag-filter-info hidden">
          <span class="tag-filter-info__label">Фильтр по тегу:</span>
          <span id="tag-filter-name" class="tag-filter-info__tag"></span>
          <button id="tag-filter-clear" class="tag-filter-info__clear" aria-label="Снять фильтр по тегу">×</button>
        </div>
        <section id="cards" class="cards-grid" aria-live="polite"></section>
        <div id="pagination" class="pagination hidden" role="navigation" aria-label="Пагинация"></div>
        <div id="empty-state" class="empty-state hidden">
          <h2>Ничего не найдено</h2>
          <p>Поменяйте фильтр или запрос поиска.</p>
        </div>
      </section>
      <section id="stories-panel" class="hidden" aria-live="polite">
        <p class="stories-intro">
          Пилотная линейка Stories фиксирует ключевые эпизоды проекта. Каждый
          выпуск — 700–1200&nbsp;знаков в структуре «что произошло → зачем →
          итог → тех-вставка → что дальше».
        </p>
        <section id="stories-list" class="stories-list"></section>
        <div id="stories-empty" class="empty-state hidden">
          <h2>Stories скоро появятся</h2>
          <p>Добавьте файлы в <code>docs/stories/</code>, и Explorer покажет их здесь.</p>
        </div>
      </section>
      <section id="issues-panel" class="hidden" aria-live="polite">
        <p class="issues-intro">
          Проблемные страницы с наибольшим количеством неработающих ссылок. Отсортированы по score (internal-missing × 3 + service × 2 + unknown × 1).
        </p>
        <section id="issues-list" class="cards-grid"></section>
        <div id="issues-empty" class="empty-state hidden">
          <h2>Проблем не найдено</h2>
          <p>Все ссылки работают корректно.</p>
        </div>
      </section>
      <section id="orphans-panel" class="hidden" aria-live="polite">
        <p class="orphans-intro">
          Страницы без маршрутов в routes.yml (кроме служебных с service:true). Эти страницы не включены в навигационную структуру сайта.
        </p>
        <section id="orphans-list" class="cards-grid"></section>
        <div id="orphans-empty" class="empty-state hidden">
          <h2>Сирот не найдено</h2>
          <p>Все страницы имеют маршруты в routes.yml.</p>
        </div>
      </section>
      <section id="kb-index-panel" class="panel hidden" aria-live="polite">
        <div class="kb-index-intro">
          <h2>Алфавитный индекс KB</h2>
          <p>Навигация по страницам базы знаний, сгруппированным по первой букве.</p>
        </div>
        <div id="kb-index-letters" class="kb-index-letters"></div>
        <div id="kb-index-content" class="kb-index-content"></div>
        <div id="kb-index-empty" class="empty-state hidden">
          <h2>Индекс пуст</h2>
          <p>Нет страниц KB для отображения.</p>
        </div>
      </section>
      <section id="stories-index-panel" class="panel hidden" aria-live="polite">
        <div class="stories-index-intro">
          <h2>Индекс Stories</h2>
          <p>Навигация по эпизодам Stories, сгруппированным по годам/месяцам или batch'ам эпизодов.</p>
        </div>
        <div id="stories-index-groups" class="stories-index-groups"></div>
        <div id="stories-index-content" class="stories-index-content"></div>
        <div id="stories-index-empty" class="empty-state hidden">
          <h2>Индекс пуст</h2>
          <p>Нет историй для отображения.</p>
        </div>
      </section>
      <section id="unresolved-terms-panel" class="hidden" aria-live="polite">
        <p class="unresolved-terms-intro">
          Кандидаты терминов из PR Stories, которые еще не добавлены в KB. Эти термины были извлечены из измененных файлов Stories и требуют создания страниц в базе знаний.
        </p>
        <section id="unresolved-terms-list" class="cards-grid"></section>
        <div id="unresolved-terms-empty" class="empty-state hidden">
          <h2>Нерешенных терминов не найдено</h2>
          <p>Все кандидаты терминов уже добавлены в KB или список пуст.</p>
        </div>
      </section>
      <section id="diagnostics-panel" class="hidden" aria-live="polite">
        <div id="diagnostics-dashboard" class="diagnostics-dashboard"></div>
        <div id="diagnostics-empty" class="empty-state hidden">
          <h2>Диагностические данные недоступны</h2>
          <p>Не удалось загрузить данные диагностики. Проверьте наличие файла <code>data/stats.json</code>.</p>
        </div>
      </section>
    </main>
    <footer class="site-footer">
      Генерация данных: <code>prototype/build-index.mjs</code>
    </footer>
  </body>
</html>
